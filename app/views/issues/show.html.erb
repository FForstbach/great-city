<p id="notice"><%= notice %></p>

<%= link_to 'Find other Issues', issues_path %>

<a href='', id='share-link'>Share your URL</a>

<div class="container">
  <div class="row">
    <div class="col-xs-12">
      <p>
        <strong>Title:</strong>
        <%= @issue.title %>
      </p>

      <p>
        <strong>Description:</strong>
        <%= @issue.description %>
      </p>

      <p>
        <strong>Photo:</strong><br />
        <%= image_tag @issue.photo.url(:medium) %>
      </p>

      <div id="map" style="width: 100%; height: 600px;"></div>

      <%= link_to 'Edit', edit_issue_path(@issue) %> |
      <%= link_to 'Back', issues_path %>
    </div>
  </div>
</div>

<%= javascript_tag do %>
  src="https://maps.googleapis.com/maps/api/js?key=<%= ENV["google_api_key"] %>&callback=initMap"
<% end %>

<script>
  function initMap() {
    var berlinIsFine = {lat: 52.487982, lng: 13.379418};
    var map = new google.maps.Map(document.getElementById('map'), {
      zoom: 9,
      center: berlinIsFine
    });
    var marker = new google.maps.Marker({
      position: berlinIsFine,
      map: map
    });
  }
</script>

<!--
<%= javascript_tag do %>
$(document).ready(function() {
var handler = Gmaps.build('Google');
handler.buildMap({ internal: { id: 'map' } }, function() {
markers = handler.addMarkers(<%= raw @hash.to_json %>); handler.bounds.extendWith(markers); handler.fitMapToBounds();
if (markers.length == 0) {
handler.getMap().setZoom(2);
} else if (markers.length == 1) { handler.getMap().setZoom(14);
} });
});
<% end %>
 -->
<script>
var link = document.getElementById('share-link');
link.addEventListener("click", function(event){
    event.preventDefault();
});

new Clipboard('#share-link', {
    text: function(trigger) {
        alert('Link copied to clipboard!')
        return window.location.href;
    }
});
</script>
